includeConfigs:
  - ${GEN3_WORKFLOW_DIR}/python/desc/gen3_workflow/etc/bps_drp_baseline.yaml
  - ${GEN3_WORKFLOW_DIR}/examples/bps_DC2-3828-y1_resources.yaml

pipelineYaml: "${OBS_VISTA_DIR}/pipelines/DRP_full.yaml#multiVisitLater"

pipetask:
  deblend:
    requestMemory: 30000
  writeObjectTable:
    requestMemory: 2000
  transformObjectTable:
    requestMemory: 2000
  consolidateVisitTable:
    requestMemory: 2000

project: dev
campaign: quick
computeSite: iris

payload:
  payloadName: DRP/videoMultiVisit
  butlerConfig: /home/ir-shir1/rds/rds-iris-ip009-lT5YGmtKack/ras81/butler_wide_20220930/data/butler.yaml
  inCollection: u/ir-shir1/DRP/videoCoaddDetect,hscImports/pdr3_dud_full 
  dataQuery: "skymap='hscPdr2' AND (
(tract=8766 AND patch IN (0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30))
OR (tract=8524 AND patch IN (18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80))
OR (tract=8765 AND patch IN (0,1,2,3,4,5,6,9,10,11,12,13,14,15,18,19,20,21,22,23,24))
OR (tract=8523 AND patch IN (18,19,20,21,22,23,24,27,28,29,30,31,32,33,36,37,38,39,40,41,42,45,46,47,48,49,50,51,54,55,56,57,58,59,60,63,64,65,66,67,68,69,72,73,74,75,76,77,78))
OR (tract=8767 AND patch IN (4,5,6,7,8,13,14,15,16,17,22,23,24,25,26,31,32,33,34,35))
OR (tract=8525 AND patch IN (22,23,24,25,26,31,32,33,34,35,40,41,42,43,44,49,50,51,52,53,58,59,60,61,62,67,68,69,70,71,76,77,78,79,80))
) 
AND NOT (band = 'Z' AND (
(tract=8524 AND patch IN (34,66,70,39,43,75,79,48,52,25,61,30,57)) 
OR (tract=8766 AND patch IN (16,3,21,7,25,12,30))
))
"


parsl_config:
  retries: 3
  monitoring: true
  executor: WorkQueue
  provider: Local
  nodes_per_block: 31
  worker_options: "--memory=160000"
